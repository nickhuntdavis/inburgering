<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#E35700" />
    <title>Dutch & Such ‚Äî Flashcards for culture, society, and daily Dutch</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="icon" type="image/svg+xml" href="assets/icons/dutch-n-such-favicon.svg" />
    <link rel="icon" type="image/png" sizes="512x512" href="assets/icons/dutch-n-such-favicon.png" />
    <link rel="apple-touch-icon" sizes="180x180" href="assets/icons/dutch-n-such-favicon-apple-touch.png" />
  </head>
  <body>
    <div id="loading" class="loading" role="status" aria-live="polite">
      <div class="spinner" aria-hidden="true"></div>
      <div class="loading-text">Loading‚Ä¶</div>
    </div>
    <div id="celebrateOverlay" class="celebrate hidden" aria-live="polite" aria-atomic="true">
      <div class="celebrate-card">
        <div id="celebrateMsg" class="celebrate-msg">Milestone reached! üéâ</div>
      </div>
    </div>
    <div class="app">
      <header class="topbar">
          <div class="controls-row top-controls">
            <div class="multi-select" id="categoryMulti">
              <div class="ms-label">KNM</div>
              <button id="categoryDropdownToggle" class="secondary" type="button" aria-haspopup="listbox" aria-expanded="false">All categories</button>
              <div id="categoryDropdown" class="dropdown-panel" role="listbox" aria-multiselectable="true"></div>
            </div>
            <div class="multi-select" id="vocabMulti">
              <div class="ms-label">Vocabulary</div>
              <button id="vocabDropdownToggle" class="secondary" type="button" aria-haspopup="listbox" aria-expanded="false">Select difficulties</button>
              <div id="vocabDropdown" class="dropdown-panel" role="listbox" aria-multiselectable="true"></div>
            </div>

            <div class="top-right">
              <div class="multi-select" id="cardsMulti">
                <div class="ms-label">Cards</div>
              <select id="knownFilterSelect" aria-label="Show">
                <option value="unknown">Unknown cards</option>
                <option value="known">Known cards</option>
                <option value="hard">Hard cards</option>
                <option value="ignored">Ignored cards</option>
                <option value="all">All cards</option>
                </select>
              </div>
              <button id="resetKnownBtn" class="danger" title="Reset known">Reset Known</button>
              <button id="reverseBtn" class="btn tertiary" title="Reverse cards (show definition first)">Reverse</button>
            </div>
          </div>
      </header>

      <main>
        <section class="stage">
          <div id="card" class="card" tabindex="0" role="button" aria-label="Flashcard; press Space to flip">
            <div class="inner" id="cardInner">
              <div class="side front" id="cardFront">
                <div class="term" id="term">‚Äî</div>
                <div class="meta">
                  <span id="categoryChip" class="chip"></span>
                  <span id="subcategoryChip" class="chip subtle"></span>
                </div>
              </div>
              <div class="side back" id="cardBack">
                <div class="definition" id="definition">‚Äî</div>
                <div class="front-echo" id="frontEcho"></div>
                <div class="context-hint" id="contextHint"></div>
              </div>
            </div>
          </div>
          <canvas id="confettiCanvas" class="confetti" aria-hidden="true"></canvas>
        </section>

        <section class="actions">
          <div class="action-row">
            <div class="left">
              <button id="shuffleBtn2" class="icon-btn small icon-shuffle" title="Shuffle deck" aria-label="Shuffle deck"></button>
              <button id="hardBtn" class="btn hard" title="Hard (2)">Hard</button>
              <button id="ignoreBtn" class="icon-btn small icon-ignore" title="Ignore to remove from your list - you can find it again later under 'Cards'" aria-label="Ignore"></button>
            </div>
            <div class="center">
              <button id="prevBtn" class="btn secondary" title="Back (‚Üê)"><span class="ico ico-left" aria-hidden="true"></span> Back</button>
              <button id="goodBtn" class="btn good" title="Know it (3 or K)">Know it</button>
              <button id="nextBtn" class="btn secondary" title="Next (N)">Next <span class="ico ico-right" aria-hidden="true"></span></button>
            </div>
            <div class="right">
              <button id="speakBtn" class="btn tertiary" title="Listen (P)">üîä Listen</button>
              <button id="flagBtn" class="icon-btn small" title="Notice a mistake or opportunity for improvement? Please click here to let me know!" aria-label="Flag an issue">
                <span class="flag-icon" aria-hidden="true"></span>
              </button>
            </div>
          </div>
          <button id="unmarkBtn" class="btn tertiary" title="Make Unknown (U)">Make Unknown</button>
        </section>

        <section class="progress">
          <div class="progress-bar">
            <div id="progressFill" class="fill"></div>
          </div>
          <div id="scopeStats" class="stats-lines"></div>
        </section>

        <section class="avatar">
          <img id="avatarImg" class="avatar-img" alt="Progress character" />
          <div id="avatarCaption" class="avatar-caption"></div>
        </section>

        <div id="milestoneToast" class="toast" role="status" aria-live="polite"></div>

        
      </main>

      <footer>
        Uses cookies to save your progress.
      </footer>
      <button id="modeToggle" class="mode-toggle" title="Toggle theme" aria-label="Toggle theme">üåô</button>
      <!-- Suggestion Modal -->
      <div id="suggestModal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="suggestTitle">
        <div class="modal-card">
          <div class="modal-header">
            <h2 id="suggestTitle">Suggest a correction</h2>
            <button id="suggestClose" class="icon-btn small" aria-label="Close">‚úï</button>
          </div>
          <div class="modal-body">
            <input id="sugSlug" type="hidden" />
            <div class="form-row form-vert">
              <label>Front of card
                <textarea id="sugFront" rows="2"></textarea>
              </label>
            </div>
            <div class="form-row form-vert">
              <label>Definition
                <textarea id="sugBack" rows="2"></textarea>
              </label>
            </div>
            <div class="form-row form-vert">
              <label>Description
                <textarea id="sugDesc" rows="3"></textarea>
              </label>
            </div>
            <div class="form-row">
              <label>Anything else?
                <textarea id="sugNotes" rows="4" placeholder="Add any extra context or notes (optional)"></textarea>
              </label>
            </div>
            <div id="sugError" class="error hidden">Please edit at least one field or write something in ‚ÄúAnything else?‚Äù</div>
            <div class="form-row">
              <label>Name
                <input id="sugName" type="text" placeholder="If you'd like to grab some credit, let me know who you are (optional)" />
              </label>
            </div>
          </div>
          <div class="modal-footer">
            <button id="suggestCancel" class="btn tertiary">Cancel</button>
            <button id="suggestSubmit" class="btn good" disabled>Submit</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Keyboard shortcuts + Onboarding (bottom-left) -->
    <div class="help-fab-row">
      <details id="kbDetails" class="help-fab">
        <summary>Keyboard shortcuts</summary>
        <div class="help-card">
          <ul>
            <li>Flip: Space / ‚Üë</li>
            <li>Next: ‚Üí ‚Ä¢ Back: ‚Üê</li>
            <li>Hard: H</li>
            <li>Know it: ‚Üì / K</li>
            <li>Shuffle: S</li>
            <li>Listen: L</li>
          </ul>
        </div>
      </details>
      <button id="onboardBtn" class="help-fab-btn icon-help" title="Help & onboarding" aria-label="Help & onboarding"></button>
    </div>

    <!-- Onboarding Modal -->
    <div id="onboardModal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="obTitle">
      <div class="modal-card">
        <div class="modal-header">
          <h2 id="obTitle">Welcome to Dutch & Such</h2>
          <button id="onboardClose" class="icon-btn small" aria-label="Close">‚úï</button>
        </div>
        <div class="hint" style="padding:0 16px 0; color:var(--muted)">Flashcards for culture, society, and daily Dutch</div>
        <div class="modal-body">
          <div class="form-row">
            <strong>Purpose</strong>
            <div>Practise Dutch vocabulary for the KNM exam with quick, easy flashcards. Flip, review, and track your progress as you learn.</div>
          </div>
          <div class="form-row">
            <strong>How it works</strong>
            <ul>
              <li>Flip a card: Space or ‚Üë</li>
              <li>Mark as Known: ‚Üì or click Know it</li>
              <li>Mark as Hard: H or click Hard</li>
              <li>Next / Back: ‚Üí and ‚Üê</li>
            </ul>
          </div>
          <div class="form-row">
            <strong>Cookies & Progress</strong>
            <div>This app uses cookies to remember your progress ‚Äî which cards you know, which are hard, and where you left off. Without cookies, you can still use the app, but progress will reset when you close it.</div>
          </div>
          <div class="hint">You can reopen this guide anytime from the ‚Äú?‚Äù icon in the top bar.</div>
        </div>
        <div class="modal-footer">
          <button id="onboardNoSave" class="btn secondary">Continue Without Saving</button>
          <button id="onboardAccept" class="btn good">Accept & Save Progress</button>
        </div>
      </div>
    </div>

    <!-- Reset Known Modal -->
    <div id="resetModal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="resetTitle">
      <div class="modal-card">
        <div class="modal-header">
          <h2 id="resetTitle">Reset known cards</h2>
          <button id="resetClose" class="icon-btn small" aria-label="Close">‚úï</button>
        </div>
        <div class="modal-body">
          <div class="form-row">Choose what to reset:</div>
        </div>
        <div class="modal-footer">
          <button id="resetCancel" class="btn tertiary">Cancel</button>
          <button id="resetSelectedBtn" class="btn secondary" title="Only cards in current KNM/Vocabulary selection">Reset selected</button>
          <button id="resetAllBtn" class="btn danger">Reset all</button>
        </div>
      </div>
    </div>

    <script src="app.js"></script>
  </body>
  </html>


